# Решение задания (5 неделя)
## Постановка задачи
1. Написать обработчик событий.  
1.1. Он должен подписываться на события **OnAfterIBlockElementAdd** и **OnAfterIBlockElementUpdate**.   
1.2. Он должен добавлять злементы в инфоблок с кодом **LOG** при изменении любых элементов инфоблоков, кроме злементов зтого инфоблока.   
1.3. Добавленный в лог элемент должен попадать в раздел с именем и кодом инфоблока, изменение которого логируется. Если такого раздела нет, он должен создаваться.   
1.4. Именем добавленного элемента должен быть **ID** логируемого злемента.    
1.5. В начало активности должна записываться дата создания/изменения элемента.   
1.6. В описание для анонса должна записываться строка в таком формате: "Имя инфоблока -> Имя раздела(от родителя к ребенку)... -> Имя элемента".   
1.7. (Дополнительно) Сделать поиск имен разделов рекурсивным.   
2. Написать агент.   
2.1. Он должен удалять все логи кроме 10 самых новых.   
2.2. Запускаться раз в час, не удаляться из админки.  

Задания выполнить в Тренировочном модуле, обработчики подключить в **init.php**.   
На проверку прислать модуль с написанными функциями, **init.php** и скриншот с подключением агента в админке.
## Установка логгера
1. Установите на сайт модуль **dev.site**;
2. Скопируйте код из файла **init.php** в файл **init.php** на сайте;
3. Создайте инфоблоком с символьным кодом **LOG**. Инфоблок должен поддерживать создание разделов;
4. Создайте агент. Укажите следующие параметры:
    + модуль: **dev.site**
    + функция агента: **\Dev\Site\Agents\IBlockLogger::clearOldLogs(N);**
    + вместо **N** подставьте количество логов, которое необходимо хранить в инфоблоке

![Параметры агента](/agent_options/agent_options.png)
## Особенности работы логгера
Разделы логгера, в которых отсутствуют элементы, автоматически удаляются.
